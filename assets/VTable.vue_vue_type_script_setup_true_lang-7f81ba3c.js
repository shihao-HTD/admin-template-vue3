import{o as v,h as N,g as F,b as T,p as z}from"./index-ef8b8a62.js";const P=Vue.defineComponent({__name:"VTableColumn",props:{id:{},defaultSlot:{},headerSlot:{},children:{},realWidth:{},type:{},label:{},className:{},labelClassName:{},property:{},prop:{},width:{},minWidth:{},renderHeader:{type:Function},sortable:{type:[Boolean,String]},sortMethod:{type:Function},sortBy:{type:[String,Function,Array]},resizable:{type:Boolean},columnKey:{},rawColumnKey:{},align:{},headerAlign:{},showOverflowTooltip:{type:[Boolean,Object]},tooltipFormatter:{},fixed:{type:[Boolean,String]},formatter:{type:Function},selectable:{type:Function},reserveSelection:{type:Boolean},filterMethod:{},filteredValue:{},filters:{},filterPlacement:{},filterMultiple:{type:Boolean},filterClassName:{},index:{type:[Number,Function]},sortOrders:{},renderCell:{type:Function},colSpan:{},rowSpan:{},level:{},filterable:{type:[Boolean,Array]},order:{},isColumnGroup:{type:Boolean},isSubColumn:{type:Boolean},columns:{},getColumnIndex:{type:Function},no:{},filterOpened:{type:Boolean}},setup(d){const c=d;return(o,t)=>{const f=Vue.resolveComponent("VTableColumn",!0),g=Vue.resolveComponent("el-table-column");return Vue.openBlock(),Vue.createBlock(g,Vue.normalizeProps(Vue.guardReactiveProps(c)),Vue.createSlots({default:Vue.withCtx(()=>[o.children&&o.children.length>0?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:0},Vue.renderList(o.children,(a,m)=>(Vue.openBlock(),Vue.createBlock(f,Vue.mergeProps({key:m,ref_for:!0},a),null,16))),128)):Vue.createCommentVNode("",!0)]),_:2},[o.headerSlot?{name:"header",fn:Vue.withCtx(a=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o.headerSlot),Vue.normalizeProps(Vue.guardReactiveProps(a)),null,16))]),key:"0"}:void 0,o.defaultSlot?{name:"default",fn:Vue.withCtx(a=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o.defaultSlot),Vue.normalizeProps(Vue.guardReactiveProps(a)),null,16))]),key:"1"}:void 0]),1040)}}}),D={class:"flex items-center drag-btn"},L=Vue.defineComponent({__name:"DragIcon",props:{icon:{default:"i-icon-park-outline:drag"}},setup(d){return(c,o)=>(Vue.openBlock(),Vue.createElementBlock("div",D,[Vue.createElementVNode("i",{class:Vue.normalizeClass(["cursor-grab mr-2",c.icon])},null,2),Vue.renderSlot(c.$slots,"default")]))}}),M=Vue.defineComponent({__name:"VTable",props:{pagination:{default(){return{align:"right",small:!1,background:!1,layout:"total, sizes, prev, pager, next, jumper",pagerCount:7,pageSizes:[10,20,30,40,50,100],total:0}}},columns:{},adaptive:{type:[Boolean,Number],default:!1},loading:{type:Boolean,default:!1},elementLoadingText:{},elementLoadingSpinner:{},elementLoadingSvgViewBox:{},elementLoadingBackground:{},elementLoadingSvg:{},draggableCol:{type:Boolean,default:!1},draggableRow:{type:Boolean,default:!1},data:{},size:{},width:{},height:{},maxHeight:{},fit:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},rowKey:{},context:{},showHeader:{type:Boolean,default:!0},showSummary:{type:Boolean,default:!1},sumText:{},summaryMethod:{},rowClassName:{},rowStyle:{},cellClassName:{},cellStyle:{},headerRowClassName:{},headerRowStyle:{},headerCellClassName:{},headerCellStyle:{},highlightCurrentRow:{type:Boolean,default:!1},currentRowKey:{},emptyText:{default:"No Data"},expandRowKeys:{},defaultExpandAll:{type:Boolean,default:!1},defaultSort:{},tooltipEffect:{default:"dark"},tooltipOptions:{},spanMethod:{},selectOnIndeterminate:{type:Boolean,default:!0},indent:{default:16},treeProps:{},lazy:{type:Boolean},load:{},className:{},style:{},tableLayout:{default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:{type:Boolean,default:!1},showOverflowTooltip:{type:[Boolean,Object]},tooltipFormatter:{},appendFilterPanelTo:{},scrollbarTabindex:{}},emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-click","cell-dblclick","cell-contextmenu","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","page-size-change","page-current-change","page-prev-click","page-next-click","drag-row-change","drag-col-change"],setup(d,{expose:c,emit:o}){const t=d,f={sortable:!1,"sort-orders":["ascending","descending",null],resizable:!0,align:"left","reserve-selection":!1,"filter-multiple":!0};function g(e){return{...f,...e}}const a=o,m=["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],w=["size-change","current-change","prev-click","next-click"],B=v(a,m),b=v(a,w,"page-"),s=Vue.ref(),k=N(s,["clearSelection","getSelectionRows","toggleRowSelection","toggleAllSelection","toggleRowExpansion","setCurrentRow","clearSort","clearFilter","doLayout","sort","scrollTo","setScrollTop","setScrollLeft"]),u=Vue.ref(t.columns),i=Vue.ref(t.data),C=Vue.ref(t.rowKey);c({...k});const S=Vue.computed(()=>{let e="justify-center";return t.pagination&&t.pagination.align&&(t.pagination.align==="left"&&(e="justify-start"),t.pagination.align==="right"&&(e="justify-end")),e});async function y(){if(await Vue.nextTick(),t.adaptive){let e=50;typeof t.adaptive=="number"&&(e=t.adaptive);const l=window.innerHeight-s.value.$el.getBoundingClientRect().top-e;s.value.style.height=l+"px"}}const x=F(y,200);T(s,x),Vue.onBeforeMount(()=>{if(h(t.draggableCol,u.value),h(t.draggableRow,i.value),t.draggableRow&&i.value.length){const e=u.value[0].defaultSlot;u.value[0].defaultSlot=l=>{const{row:r}=l;return Vue.createVNode(L,null,{default:()=>{var n;return[e?e(l):Vue.createVNode("span",null,[(n=u.value[0])!=null&&n.prop?r[u.value[0].prop]:""])]}})}}}),Vue.onMounted(()=>{t.adaptive&&y(),t.draggableCol&&_(),t.draggableRow&&R()});function _(){Vue.nextTick(()=>{const e=s.value.$el.querySelector(".el-table__header-wrapper tr");Sortable.create(e,{delay:0,animation:300,onEnd:({newIndex:l,oldIndex:r})=>{const n=u.value.splice(r,1)[0];u.value.splice(l,0,n),a("drag-col-change",u.value)}})})}function R(){Vue.nextTick(()=>{const e=s.value.$el.querySelector(".el-table__body-wrapper tbody");Sortable.create(e,{delay:0,handle:".drag-btn",animation:300,onEnd:({newIndex:l,oldIndex:r})=>{const n=i.value.splice(r,1)[0];i.value.splice(l,0,n),a("drag-row-change",i.value)}})})}function h(e,l){const r=Math.random().toString(36).slice(2);return e&&l.length&&!l[0].id&&(l.forEach((n,V)=>{n.id=r+"-"+V}),C.value="id"),l}return(e,l)=>{const r=Vue.resolveComponent("el-table"),n=Vue.resolveComponent("el-pagination"),V=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(r,Vue.mergeProps({ref_key:"tableRef",ref:s},Vue.toHandlers(Vue.unref(B)),t,{style:{width:"100%"},data:Vue.unref(i)}),{append:Vue.withCtx(()=>[Vue.renderSlot(e.$slots,"append")]),empty:Vue.withCtx(()=>[Vue.renderSlot(e.$slots,"empty")]),default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.columns,(p,E)=>(Vue.openBlock(),Vue.createBlock(P,Vue.mergeProps({key:p.id||E,ref_for:!0},g(p)),null,16))),128)),Vue.renderSlot(e.$slots,"default")]),_:3},16,["data"])),[[V,e.loading]]),Vue.renderSlot(e.$slots,"footer",{},()=>[Vue.unref(z)(e.pagination)?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["p-2 flex",Vue.unref(S)])},[Vue.createVNode(n,Vue.mergeProps(Vue.toHandlers(Vue.unref(b)),e.pagination),Vue.createSlots({_:2},[e.pagination.defaultSlot?{name:"default",fn:Vue.withCtx(p=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(e.pagination.defaultSlot),Vue.normalizeProps(Vue.guardReactiveProps(p)),null,16))]),key:"0"}:void 0]),1040)],2)):Vue.createCommentVNode("",!0)])],64)}}});export{M as _};
